---
environments:
  kind1:
    kubeContext: kind-kind1
    values:
      - prometheus:
          enabled: true
        grafana:
          enabled: true
  kind2:
    kubeContext: kind-kind2
    values:
      - prometheus:
          enabled: true
        grafana:
          enabled: false

---
repositories:
  - name: prometheus-community
    url: https://prometheus-community.github.io/helm-charts
  - name: grafana
    url: https://grafana.github.io/helm-charts

releases:
  - name: prometheus
    chart: prometheus-community/prometheus
    namespace: prometheus
    condition: prometheus.enabled
    values:
      - server:
          service:
            servicePort: 9090
  - name: grafana
    chart: grafana/grafana
    namespace: grafana
    condition: grafana.enabled
    values:
      - service:
          port: 3000
        adminPassword: admin
        datasources:
          datasources.yaml:
            apiVersion: 1
            datasources:
            - name: Prometheus | kind1
              type: prometheus
              url: http://prometheus-server.prometheus.svc:9090
              isDefault: true
